# _scanners

URL: /api/lexers/_scanners/
Section: lexers

--------------------------------------------------------------------------------

_scanners - Rosettes window.BENGAL_THEME_DEFAULTS = { appearance: 'system', palette: '' }; window.Bengal = window.Bengal || {}; window.Bengal.enhanceBaseUrl = '/assets/js/enhancements'; window.Bengal.watchDom = true; window.Bengal.debug = false; window.Bengal.enhanceUrls = { 'toc': '/assets/js/enhancements/toc.js', 'docs-nav': '/assets/js/enhancements/docs-nav.js', 'tabs': '/assets/js/enhancements/tabs.js', 'lightbox': '/assets/js/enhancements/lightbox.js', 'interactive': '/assets/js/enhancements/interactive.js', 'mobile-nav': '/assets/js/enhancements/mobile-nav.js', 'action-bar': '/assets/js/enhancements/action-bar.js', 'copy-link': '/assets/js/enhancements/copy-link.js', 'data-table': '/assets/js/enhancements/data-table.js', 'lazy-loaders': '/assets/js/enhancements/lazy-loaders.js', 'holo': '/assets/js/enhancements/holo.js', 'link-previews': '/assets/js/enhancements/link-previews.js' }; (function () { try { var defaults = window.BENGAL_THEME_DEFAULTS || { appearance: 'system', palette: '' }; var defaultAppearance = defaults.appearance; if (defaultAppearance === 'system') { defaultAppearance = (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) ? 'dark' : 'light'; } var storedTheme = localStorage.getItem('bengal-theme'); var storedPalette = localStorage.getItem('bengal-palette'); var theme = storedTheme ? (storedTheme === 'system' ? defaultAppearance : storedTheme) : defaultAppearance; var palette = storedPalette ?? defaults.palette; document.documentElement.setAttribute('data-theme', theme); if (palette) { document.documentElement.setAttribute('data-palette', palette); } } catch (e) { document.documentElement.setAttribute('data-theme', 'light'); } })(); { "prerender": [ { "where": { "and": [ { "href_matches": "/docs/*" }, { "not": { "selector_matches": "[data-external], [target=_blank], .external" } } ] }, "eagerness": "conservative" } ], "prefetch": [ { "where": { "and": [ { "href_matches": "/*" }, { "not": { "selector_matches": "[data-external], [target=_blank], .external" } } ] }, "eagerness": "conservative" } ] } Skip to main content ❀ DocumentationArrow ClockwiseGet StartedCodeHighlightingPaletteStylingStarburstExtendingNoteTutorialsBookmarkReferenceInfoAboutReleasesDevGitHubAPI Reference Palette Appearance Chevron Down Mode Monitor System Sun Light Moon Dark Palette Snow Lynx Brown Bengal Silver Bengal Charcoal Bengal Blue Bengal List ❀ X Close Documentation Caret Down Arrow Clockwise Get Started Code Highlighting Palette Styling Starburst Extending Note Tutorials Bookmark Reference Info About Releases Dev Caret Down GitHub API Reference Palette Appearance Chevron Down Mode Monitor System Sun Light Moon Dark Palette Snow Lynx Brown Bengal Silver Bengal Charcoal Bengal Blue Bengal Rosettes API Reference Caret Right Formatters html Caret Right Lexers _scanners _state_machine bash_sm c_sm clojure_sm cpp_sm css_sm csv_sm cuda_sm cue_sm dart_sm diff_sm dockerfile_sm elixir_sm gleam_sm go_sm graphql_sm groovy_sm haskell_sm hcl_sm html_sm ini_sm java_sm javascript_sm jinja_sm json_sm julia_sm kida_sm kotlin_sm lua_sm makefile_sm markdown_sm mojo_sm nginx_sm nim_sm perl_sm php_sm pkl_sm plaintext_sm powershell_sm protobuf_sm python_sm r_sm ruby_sm rust_sm scala_sm sql_sm stan_sm swift_sm toml_sm tree_sm triton_sm typescript_sm v_sm xml_sm yaml_sm zig_sm Caret Right Themes _mapping _palette _roles palettes _config _escape _parallel _protocol _registry _types delegate rosettes Rosettes API ReferenceLexers ᗢ Caret Down Link Copy URL External Open LLM text Copy Copy LLM text Share with AI Ask Claude Ask ChatGPT Ask Gemini Ask Copilot Module lexers._scanners Reusable scanner components for state machine lexers. These mixins provide common scanning patterns that can be composed into language-specific lexers, dramatically reducing code duplication. Usage: class MyLexer( CStyleCommentsMixin, CStyleNumbersMixin, CStyleStringsMixin, StateMachineLexer, ): # Just define keywords and operators pass File Code View source 10Classes11Functions Classes NumberConfig 7 ▼ Configuration for number scanning. Configuration for number scanning. Attributes Name Type Description hex_prefix tuple[str, ...] Prefix for hex numbers (e.g., &quot;0x&quot;). octal_prefix tuple[str, ...] Prefix for octal numbers (e.g., &quot;0o&quot;). binary_prefix tuple[str, ...] Prefix for binary numbers (e.g., &quot;0b&quot;). allow_underscores bool Whether underscores are allowed in numbers. integer_suffixes tuple[str, ...] Valid suffixes for integers (e.g., (&quot;n&quot;,) for BigInt). float_suffixes tuple[str, ...] Valid suffixes for floats (e.g., (&quot;f32&quot;, &quot;f64&quot;)). imaginary_suffix str | None Suffix for imaginary numbers (e.g., &quot;j&quot; for Python). StringConfig 7 ▼ Configuration for string scanning. Configuration for string scanning. Attributes Name Type Description single_quote bool Whether single-quoted strings are allowed. double_quote bool Whether double-quoted strings are allowed. backtick bool Whether backtick strings are allowed (template literals). triple_quote bool Whether triple-quoted strings are allowed. escape_char str The escape character (usually backslash). prefixes frozenset[str] Valid string prefixes (e.g., &quot;frb&quot; for Python). raw_string_marker str | None Marker for raw strings (e.g., &quot;r&quot; for Python). CommentConfig 5 ▼ Configuration for comment scanning. Configuration for comment scanning. Attributes Name Type Description line_comment str | None Line comment marker (e.g., &quot;//&quot;, &quot;#&quot;). block_start str | None Block comment start (e.g., &quot;/*&quot;). block_end str | None Block comment end (e.g., &quot;*/&quot;). doc_line str | None Documentation comment line marker (e.g., &quot;///&quot;). doc_block_start str | None Documentation block start (e.g., &quot;/**&quot;). OperatorConfig 3 ▼ Configuration for operator scanning. Operators are scanned longest-first. Group by length for effi… Configuration for operator scanning. Operators are scanned longest-first. Group by length for efficiency. Attributes Name Type Description three_char frozenset[str] — two_char frozenset[str] — one_char frozenset[str] — WhitespaceMixin 1 ▼ Mixin for whitespace scanning. All languages use this. Mixin for whitespace scanning. All languages use this. Methods CStyleCommentsMixin 3 ▼ Mixin for C-style comments (// and /* */). Used by: JavaScript, TypeScript, C, C++, Java, Go, Rust… Mixin for C-style comments (// and /* */). Used by: JavaScript, TypeScript, C, C++, Java, Go, Rust, etc. Methods HashCommentsMixin 2 ▼ Mixin for hash comments (#). Used by: Python, Ruby, Bash, Perl, YAML, etc. Mixin for hash comments (#). Used by: Python, Ruby, Bash, Perl, YAML, etc. Methods CStyleNumbersMixin 2 ▼ Mixin for C-style numbers. Used by: Most languages (Python, JavaScript, C, C++, Java, Go, Rust, et… Mixin for C-style numbers. Used by: Most languages (Python, JavaScript, C, C++, Java, Go, Rust, etc.) Attributes Name Type Description NUMBER_CONFIG NumberConfig — Methods CStyleStringsMixin 2 ▼ Mixin for C-style strings (&quot; and &#39;). Used by: Most languages. Mixin for C-style strings (&quot; and '). Used by: Most languages. Attributes Name Type Description STRING_CONFIG StringConfig — Methods CStyleOperatorsMixin 2 ▼ Mixin for scanning operators longest-first. Configure via OPERATOR_CONFIG in subclass. Mixin for scanning operators longest-first. Configure via OPERATOR_CONFIG in subclass. Attributes Name Type Description OPERATOR_CONFIG OperatorConfig — Methods Functions scan_whitespace 2 tuple[int, int] ▼ Scan whitespace, returning (new_pos, newline_count). def scan_whitespace(code: str, pos: int) -&gt; tuple[int, int] Parameters Name Type Description code str pos int Returns tuple[int, int] scan_line_comment 2 int ▼ Scan to end of line (for line comments). def scan_line_comment(code: str, pos: int) -&gt; int Parameters Name Type Description code str pos int Position after comment marker (e.g., after &quot;//&quot;). Returns int scan_block_comment 3 int ▼ Scan block comment until end marker. def scan_block_comment(code: str, pos: int, end_marker: str = &#39;*/&#39;) -&gt; int Parameters Name Type Description code str pos int Position after opening marker. end_marker str The closing marker (e.g., &quot;*/&quot;). Default: &#39;*/&#39; Returns int scan_identifier 2 int ▼ Scan an identifier. def scan_identifier(code: str, pos: int) -&gt; int Parameters Name Type Description code str pos int Position at start of identifier. Returns int scan_string 3 tuple[int, int] ▼ Scan a string literal using C-optimized str.find(). def scan_string(code: str, pos: int, quote: str) -&gt; tuple[int, int] Parameters Name Type Description code str pos int Position after opening quote. quote str The quote character. Returns tuple[int, int] scan_triple_string 3 tuple[int, int] ▼ Scan a triple-quoted string using C-optimized str.find(). def scan_triple_string(code: str, pos: int, quote: str) -&gt; tuple[int, int] Parameters Name Type Description code str pos int Position after opening triple quote. quote str The quote character. Returns tuple[int, int] scan_c_style_number 3 tuple[TokenType, int] ▼ Scan a C-style number literal. **Handles:** - Hex: 0x1a2b - Octal: 0o755 - Bin… def scan_c_style_number(code: str, pos: int, config: NumberConfig | None = None) -&gt; tuple[TokenType, int] Scan a C-style number literal. Handles: Hex: 0x1a2b Octal: 0o755 Binary: 0b1010 Float: 3.14, 1e10, 3.14e-10 Integer: 42 Parameters Name Type Description code str pos int Position at first digit or dot. config NumberConfig | None Number scanning configuration. Default: None Returns tuple[TokenType, int] _scan_digits 4 int ▼ Scan digits, optionally with underscores. def _scan_digits(code: str, pos: int, digit_set: frozenset[str], allow_underscores: bool) -&gt; int Parameters Name Type Description code str pos int digit_set frozenset[str] allow_underscores bool Returns int _scan_exponent 3 int ▼ Scan optional exponent (e.g., e10, E-5). def _scan_exponent(code: str, pos: int, allow_underscores: bool) -&gt; int Parameters Name Type Description code str pos int allow_underscores bool Returns int _scan_suffix 3 int ▼ Scan optional type suffix (e.g., u32, f64, n). def _scan_suffix(code: str, pos: int, suffixes: tuple[str, ...]) -&gt; int Parameters Name Type Description code str pos int suffixes tuple[str, ...] Returns int scan_operators 3 tuple[str | None, int] ▼ Scan operators using longest-match. def scan_operators(code: str, pos: int, config: OperatorConfig) -&gt; tuple[str | None, int] Parameters Name Type Description code str pos int config OperatorConfig Returns tuple[str | None, int] Next → _state_machine List &copy; 2026 Rosettes ᓚᘏᗢ window.BENGAL_LAZY_ASSETS = { tabulator: '/assets/js/tabulator.min.js', dataTable: '/assets/js/data-table.js', mermaidToolbar: '/assets/js/mermaid-toolbar.js', mermaidTheme: '/assets/js/mermaid-theme.js', graphMinimap: '/assets/js/graph-minimap.js', graphContextual: '/assets/js/graph-contextual.js' }; window.BENGAL_ICONS = { close: '/assets/icons/close.svg', enlarge: '/assets/icons/enlarge.svg', copy: '/assets/icons/copy.svg', 'download-svg': '/assets/icons/download.svg', 'download-png': '/assets/icons/image.svg', 'zoom-in': '/assets/icons/zoom-in.svg', 'zoom-out': '/assets/icons/zoom-out.svg', reset: '/assets/icons/reset.svg' }; Arrow Up

--------------------------------------------------------------------------------

Metadata:
- Word Count: 1368
- Reading Time: 7 minutes
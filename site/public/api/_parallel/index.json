{"url":"/api/_parallel/","title":"_parallel","description":"Parallel tokenization for free-threaded Python (3.14t+).\n\nEnables true parallel tokenization of large files by splitting at safe\nboundaries and processing chunks concurrently.","plain_text":"_parallel - Rosettes window.BENGAL_THEME_DEFAULTS = { appearance: 'system', palette: '' }; window.Bengal = window.Bengal || {}; window.Bengal.enhanceBaseUrl = '/assets/js/enhancements'; window.Bengal.watchDom = true; window.Bengal.debug = false; window.Bengal.enhanceUrls = { 'toc': '/assets/js/enhancements/toc.js', 'docs-nav': '/assets/js/enhancements/docs-nav.js', 'tabs': '/assets/js/enhancements/tabs.js', 'lightbox': '/assets/js/enhancements/lightbox.js', 'interactive': '/assets/js/enhancements/interactive.js', 'mobile-nav': '/assets/js/enhancements/mobile-nav.js', 'action-bar': '/assets/js/enhancements/action-bar.js', 'copy-link': '/assets/js/enhancements/copy-link.js', 'data-table': '/assets/js/enhancements/data-table.js', 'lazy-loaders': '/assets/js/enhancements/lazy-loaders.js', 'holo': '/assets/js/enhancements/holo.js', 'link-previews': '/assets/js/enhancements/link-previews.js' }; (function () { try { var defaults = window.BENGAL_THEME_DEFAULTS || { appearance: 'system', palette: '' }; var defaultAppearance = defaults.appearance; if (defaultAppearance === 'system') { defaultAppearance = (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) ? 'dark' : 'light'; } var storedTheme = localStorage.getItem('bengal-theme'); var storedPalette = localStorage.getItem('bengal-palette'); var theme = storedTheme ? (storedTheme === 'system' ? defaultAppearance : storedTheme) : defaultAppearance; var palette = storedPalette ?? defaults.palette; document.documentElement.setAttribute('data-theme', theme); if (palette) { document.documentElement.setAttribute('data-palette', palette); } } catch (e) { document.documentElement.setAttribute('data-theme', 'light'); } })(); { \"prerender\": [ { \"where\": { \"and\": [ { \"href_matches\": \"/docs/*\" }, { \"not\": { \"selector_matches\": \"[data-external], [target=_blank], .external\" } } ] }, \"eagerness\": \"conservative\" } ], \"prefetch\": [ { \"where\": { \"and\": [ { \"href_matches\": \"/*\" }, { \"not\": { \"selector_matches\": \"[data-external], [target=_blank], .external\" } } ] }, \"eagerness\": \"conservative\" } ] } Skip to main content ❀ DocumentationArrow ClockwiseGet StartedCodeHighlightingPaletteStylingStarburstExtendingNoteTutorialsBookmarkReferenceInfoAboutReleasesDevGitHubAPI Reference Palette Appearance Chevron Down Mode Monitor System Sun Light Moon Dark Palette Snow Lynx Brown Bengal Silver Bengal Charcoal Bengal Blue Bengal List ❀ X Close Documentation Caret Down Arrow Clockwise Get Started Code Highlighting Palette Styling Starburst Extending Note Tutorials Bookmark Reference Info About Releases Dev Caret Down GitHub API Reference Palette Appearance Chevron Down Mode Monitor System Sun Light Moon Dark Palette Snow Lynx Brown Bengal Silver Bengal Charcoal Bengal Blue Bengal Rosettes API Reference Caret Right Formatters html Caret Right Lexers _scanners _state_machine bash_sm c_sm clojure_sm cpp_sm css_sm csv_sm cuda_sm cue_sm dart_sm diff_sm dockerfile_sm elixir_sm gleam_sm go_sm graphql_sm groovy_sm haskell_sm hcl_sm html_sm ini_sm java_sm javascript_sm jinja_sm json_sm julia_sm kida_sm kotlin_sm lua_sm makefile_sm markdown_sm mojo_sm nginx_sm nim_sm perl_sm php_sm pkl_sm plaintext_sm powershell_sm protobuf_sm python_sm r_sm ruby_sm rust_sm scala_sm sql_sm stan_sm swift_sm toml_sm tree_sm triton_sm typescript_sm v_sm xml_sm yaml_sm zig_sm Caret Right Themes _mapping _palette _roles palettes _config _escape _parallel _protocol _registry _types delegate rosettes Rosettes API Reference ᗢ Caret Down Link Copy URL External Open LLM text Copy Copy LLM text Share with AI Ask Claude Ask ChatGPT Ask Gemini Ask Copilot Module _parallel Parallel tokenization for free-threaded Python (3.14t+). Enables true parallel tokenization of large files by splitting at safe boundaries and processing chunks concurrently. File Code View source 1Class4Functions Classes _Chunk 3 ▼ A chunk of source code with position metadata. A chunk of source code with position metadata. Attributes Name Type Description text str — start_offset int — start_line int — Functions is_free_threaded 0 bool ▼ Check if running on free-threaded Python (3.14t+). def is_free_threaded() -&gt; bool Returns bool _find_safe_splits 2 list[int] ▼ Find safe split points (newlines) for parallel tokenization. We split at newli… def _find_safe_splits(code: str, target_chunk_size: int) -&gt; list[int] Find safe split points (newlines) for parallel tokenization. We split at newlines to avoid splitting in the middle of tokens. This is a heuristic that works for most languages. Parameters Name Type Description code str Source code to split. target_chunk_size int Target size for each chunk. Returns list[int] _make_chunks 2 list[_Chunk] ▼ Split code into chunks at the given positions. def _make_chunks(code: str, splits: list[int]) -&gt; list[_Chunk] Parameters Name Type Description code str Source code to split. splits list[int] List of positions to split at. Returns list[_Chunk] tokenize_parallel 2 Iterator[Token] ▼ Parallel tokenization for large files. Only beneficial on free-threaded Python… def tokenize_parallel(lexer: StateMachineLexer, code: str) -&gt; Iterator[Token] Parallel tokenization for large files. Only beneficial on free-threaded Python (3.14t+). Falls back to sequential on GIL Python. Parameters Name Type Description lexer StateMachineLexer The lexer to use. code str Source code to tokenize. Returns Iterator[Token] ← Previous _escape Next → _protocol List &copy; 2026 Rosettes ᓚᘏᗢ window.BENGAL_LAZY_ASSETS = { tabulator: '/assets/js/tabulator.min.js', dataTable: '/assets/js/data-table.js', mermaidToolbar: '/assets/js/mermaid-toolbar.js', mermaidTheme: '/assets/js/mermaid-theme.js', graphMinimap: '/assets/js/graph-minimap.js', graphContextual: '/assets/js/graph-contextual.js' }; window.BENGAL_ICONS = { close: '/assets/icons/close.svg', enlarge: '/assets/icons/enlarge.svg', copy: '/assets/icons/copy.svg', 'download-svg': '/assets/icons/download.svg', 'download-png': '/assets/icons/image.svg', 'zoom-in': '/assets/icons/zoom-in.svg', 'zoom-out': '/assets/icons/zoom-out.svg', reset: '/assets/icons/reset.svg' }; Arrow Up","excerpt":"_parallel - Rosettes window.BENGAL_THEME_DEFAULTS = { appearance: 'system', palette: '' }; window.Bengal = window.Bengal || {}; window.Bengal.enhanceBaseUrl = '/assets/js/enhancements';...","metadata":{"type":"autodoc-python","qualified_name":"_parallel","element_type":"module","description":"Parallel tokenization for free-threaded Python (3.14t+).\n\nEnables true parallel tokenization of large files by splitting at safe\nboundaries and processing chunks concurrently.","source_file":"src/rosettes/_parallel.py","line_number":1,"is_autodoc":true,"_autodoc_template":"autodoc/python/module","_autodoc_url_path":"api/_parallel","_autodoc_page_type":"autodoc-python","title":"_parallel"},"section":"api","word_count":676,"reading_time":3}
# rosettes

URL: /api/rosettes/
Section: api

--------------------------------------------------------------------------------

rosettes - Rosettes window.BENGAL_THEME_DEFAULTS = { appearance: 'system', palette: '' }; window.Bengal = window.Bengal || {}; window.Bengal.enhanceBaseUrl = '/assets/js/enhancements'; window.Bengal.watchDom = true; window.Bengal.debug = false; window.Bengal.enhanceUrls = { 'toc': '/assets/js/enhancements/toc.js', 'docs-nav': '/assets/js/enhancements/docs-nav.js', 'tabs': '/assets/js/enhancements/tabs.js', 'lightbox': '/assets/js/enhancements/lightbox.js', 'interactive': '/assets/js/enhancements/interactive.js', 'mobile-nav': '/assets/js/enhancements/mobile-nav.js', 'action-bar': '/assets/js/enhancements/action-bar.js', 'copy-link': '/assets/js/enhancements/copy-link.js', 'data-table': '/assets/js/enhancements/data-table.js', 'lazy-loaders': '/assets/js/enhancements/lazy-loaders.js', 'holo': '/assets/js/enhancements/holo.js', 'link-previews': '/assets/js/enhancements/link-previews.js' }; (function () { try { var defaults = window.BENGAL_THEME_DEFAULTS || { appearance: 'system', palette: '' }; var defaultAppearance = defaults.appearance; if (defaultAppearance === 'system') { defaultAppearance = (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) ? 'dark' : 'light'; } var storedTheme = localStorage.getItem('bengal-theme'); var storedPalette = localStorage.getItem('bengal-palette'); var theme = storedTheme ? (storedTheme === 'system' ? defaultAppearance : storedTheme) : defaultAppearance; var palette = storedPalette ?? defaults.palette; document.documentElement.setAttribute('data-theme', theme); if (palette) { document.documentElement.setAttribute('data-palette', palette); } } catch (e) { document.documentElement.setAttribute('data-theme', 'light'); } })(); { "prerender": [ { "where": { "and": [ { "href_matches": "/docs/*" }, { "not": { "selector_matches": "[data-external], [target=_blank], .external" } } ] }, "eagerness": "conservative" } ], "prefetch": [ { "where": { "and": [ { "href_matches": "/*" }, { "not": { "selector_matches": "[data-external], [target=_blank], .external" } } ] }, "eagerness": "conservative" } ] } Skip to main content ❀ DocumentationArrow ClockwiseGet StartedCodeHighlightingPaletteStylingStarburstExtendingNoteTutorialsBookmarkReferenceInfoAboutReleasesDevGitHubAPI Reference Palette Appearance Chevron Down Mode Monitor System Sun Light Moon Dark Palette Snow Lynx Brown Bengal Silver Bengal Charcoal Bengal Blue Bengal List ❀ X Close Documentation Caret Down Arrow Clockwise Get Started Code Highlighting Palette Styling Starburst Extending Note Tutorials Bookmark Reference Info About Releases Dev Caret Down GitHub API Reference Palette Appearance Chevron Down Mode Monitor System Sun Light Moon Dark Palette Snow Lynx Brown Bengal Silver Bengal Charcoal Bengal Blue Bengal Rosettes API Reference Caret Right Formatters html Caret Right Lexers _scanners _state_machine bash_sm c_sm clojure_sm cpp_sm css_sm csv_sm cuda_sm cue_sm dart_sm diff_sm dockerfile_sm elixir_sm gleam_sm go_sm graphql_sm groovy_sm haskell_sm hcl_sm html_sm ini_sm java_sm javascript_sm jinja_sm json_sm julia_sm kida_sm kotlin_sm lua_sm makefile_sm markdown_sm mojo_sm nginx_sm nim_sm perl_sm php_sm pkl_sm plaintext_sm powershell_sm protobuf_sm python_sm r_sm ruby_sm rust_sm scala_sm sql_sm stan_sm swift_sm toml_sm tree_sm triton_sm typescript_sm v_sm xml_sm yaml_sm zig_sm Caret Right Themes _mapping _palette _roles palettes _config _escape _parallel _protocol _registry _types delegate rosettes Rosettes API Reference ᗢ Caret Down Link Copy URL External Open LLM text Copy Copy LLM text Share with AI Ask Claude Ask ChatGPT Ask Gemini Ask Copilot Module rosettes Rosettes — Modern syntax highlighting for Python 3.14t. A pure-Python syntax highlighter designed for free-threaded Python. All lexers are hand-written state machines with O(n) guaranteed performance and zero ReDoS vulnerability. Example: &gt;&gt;&gt; from rosettes import highlight &gt;&gt;&gt; html = highlight(&quot;def foo(): pass&quot;, &quot;python&quot;) &gt;&gt;&gt; print(html) &lt;div class=&quot;highlight&quot;&gt;...&lt;/div&gt; Thread-Safety: All public APIs are thread-safe by design: Lexers use only local variables during tokenization Formatter state is immutable Registry uses functools.cache for thread-safe memoization Parallel Processing (3.14t): Rosettes supports parallel tokenization for maximum performance on free-threaded Python. Use highlight_many() for multiple code blocks or tokenize_parallel() for large single files. Free-Threading Declaration: This module declares itself safe for free-threaded Python via the _Py_mod_gil attribute (PEP 703). File Code View source 5Functions Functions highlight 2 str ▼ Highlight source code and return HTML. This is the primary high-level API for … def highlight(code: str, language: str) -&gt; str Highlight source code and return HTML. This is the primary high-level API for syntax highlighting. Thread-safe and suitable for concurrent use. All lexers are hand-written state machines with O(n) guaranteed performance and zero ReDoS vulnerability. Parameters Name Type Description code str The source code to highlight. language str Language name or alias (e.g., 'python', 'py', 'js'). Returns str tokenize 4 list[Token] ▼ Tokenize source code without formatting. Useful for analysis, custom formattin… def tokenize(code: str, language: str, start: int = 0, end: int | None = None) -&gt; list[Token] Tokenize source code without formatting. Useful for analysis, custom formatting, or testing. Thread-safe. All lexers are hand-written state machines with O(n) guaranteed performance and zero ReDoS vulnerability. Parameters Name Type Description code str The source code to tokenize. language str Language name or alias. start int Starting index in the source string. Default: 0 end int | None Optional ending index in the source string. Default: None Returns list[Token] highlight_many 1 list[str] ▼ Highlight multiple code blocks in parallel. This is the recommended way to hig… def highlight_many(items: Iterable[tuple[str, str]]) -&gt; list[str] Highlight multiple code blocks in parallel. This is the recommended way to highlight many code blocks concurrently. On Python 3.14t (free-threaded), this provides true parallelism. On GIL Python, it still provides benefits via I/O overlapping. Thread-safe by design: each lexer uses only local variables. Performance: On 3.14t with 4+ cores, highlighting 50+ code blocks provides 1.5-2x speedup over sequential processing. Parameters Name Type Description items Iterable[tuple[str, str]] Iterable of (code, language) tuples. Returns list[str] tokenize_many 1 list[list[Token]] ▼ Tokenize multiple code blocks in parallel. Similar to highlight_many() but ret… def tokenize_many(items: Iterable[tuple[str, str]]) -&gt; list[list[Token]] Tokenize multiple code blocks in parallel. Similar to highlight_many() but returns raw tokens instead of HTML. Useful for analysis, custom formatting, or when you need token data. Thread-safe by design: each lexer uses only local variables. Parameters Name Type Description items Iterable[tuple[str, str]] Iterable of (code, language) tuples. Returns list[list[Token]] __getattr__ 1 object ▼ Module-level getattr for free-threading declaration. This allows Python to que… def __getattr__(name: str) -&gt; object Module-level getattr for free-threading declaration. This allows Python to query whether this module is safe for free-threaded execution without enabling the GIL. Parameters Name Type Description name str Returns object ← Previous delegate Next → Rosettes API Reference List &copy; 2026 Rosettes ᓚᘏᗢ window.BENGAL_LAZY_ASSETS = { tabulator: '/assets/js/tabulator.min.js', dataTable: '/assets/js/data-table.js', mermaidToolbar: '/assets/js/mermaid-toolbar.js', mermaidTheme: '/assets/js/mermaid-theme.js', graphMinimap: '/assets/js/graph-minimap.js', graphContextual: '/assets/js/graph-contextual.js' }; window.BENGAL_ICONS = { close: '/assets/icons/close.svg', enlarge: '/assets/icons/enlarge.svg', copy: '/assets/icons/copy.svg', 'download-svg': '/assets/icons/download.svg', 'download-png': '/assets/icons/image.svg', 'zoom-in': '/assets/icons/zoom-in.svg', 'zoom-out': '/assets/icons/zoom-out.svg', reset: '/assets/icons/reset.svg' }; Arrow Up

--------------------------------------------------------------------------------

Metadata:
- Word Count: 952
- Reading Time: 5 minutes
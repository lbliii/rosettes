{"url":"/docs/extending/custom-formatter/","title":"Custom Formatter","description":"Build custom output formats beyond HTML","plain_text":"Custom Formatter Build custom formatters for terminal output, LaTeX, or any other format. The Formatter Protocol Formatters implement a simple protocol: from typing import Protocol, Iterable from rosettes import Token, FormatConfig class Formatter(Protocol): def format_string( self, tokens: Iterable[Token], config: FormatConfig, ) -&gt; str: ... Example: Terminal Formatter A formatter that outputs ANSI-colored terminal text: from rosettes import tokenize, Token, TokenType, FormatConfig # ANSI color codes COLORS = { TokenType.KEYWORD: &quot;\\033[95m&quot;, # Magenta TokenType.NAME_FUNCTION: &quot;\\033[92m&quot;, # Green TokenType.STRING: &quot;\\033[93m&quot;, # Yellow TokenType.COMMENT: &quot;\\033[90m&quot;, # Gray TokenType.NUMBER: &quot;\\033[94m&quot;, # Blue } RESET = &quot;\\033[0m&quot; class TerminalFormatter: def format_string( self, tokens: Iterable[Token], config: FormatConfig, ) -&gt; str: result = [] for token in tokens: color = COLORS.get(token.type, &quot;&quot;) if color: result.append(f&quot;{color}{token.value}{RESET}&quot;) else: result.append(token.value) return &quot;&quot;.join(result) # Usage tokens = tokenize(&quot;def hello(): print(&#x27;world&#x27;)&quot;, &quot;python&quot;) formatter = TerminalFormatter() output = formatter.format_string(tokens, FormatConfig()) print(output) # Colored terminal output Example: Markdown Formatter A formatter that outputs fenced code blocks: class MarkdownFormatter: def format_string( self, tokens: Iterable[Token], config: FormatConfig, ) -&gt; str: code = &quot;&quot;.join(token.value for token in tokens) lang = config.data_language or &quot;&quot; return f&quot;```{lang}\\n{code}\\n```&quot; # Usage tokens = tokenize(&quot;x = 1&quot;, &quot;python&quot;) formatter = MarkdownFormatter() output = formatter.format_string(tokens, FormatConfig(data_language=&quot;python&quot;)) # ```python # x = 1 # ``` Example: JSON Token Dump Export tokens as JSON for analysis: import json from rosettes import tokenize, FormatConfig class JsonFormatter: def format_string( self, tokens: Iterable[Token], config: FormatConfig, ) -&gt; str: token_list = [ { &quot;type&quot;: token.type.name, &quot;value&quot;: token.value, &quot;line&quot;: token.line, &quot;column&quot;: token.column, } for token in tokens ] return json.dumps(token_list, indent=2) # Usage tokens = tokenize(&quot;x = 1&quot;, &quot;python&quot;) formatter = JsonFormatter() print(formatter.format_string(tokens, FormatConfig())) Output: [ {&quot;type&quot;: &quot;NAME&quot;, &quot;value&quot;: &quot;x&quot;, &quot;line&quot;: 1, &quot;column&quot;: 1}, {&quot;type&quot;: &quot;WHITESPACE&quot;, &quot;value&quot;: &quot; &quot;, &quot;line&quot;: 1, &quot;column&quot;: 2}, {&quot;type&quot;: &quot;OPERATOR&quot;, &quot;value&quot;: &quot;=&quot;, &quot;line&quot;: 1, &quot;column&quot;: 3}, {&quot;type&quot;: &quot;WHITESPACE&quot;, &quot;value&quot;: &quot; &quot;, &quot;line&quot;: 1, &quot;column&quot;: 4}, {&quot;type&quot;: &quot;NUMBER_INTEGER&quot;, &quot;value&quot;: &quot;1&quot;, &quot;line&quot;: 1, &quot;column&quot;: 5} ] Using Custom Formatters Custom formatters work with tokenize(): from rosettes import tokenize, FormatConfig def highlight_custom(code: str, language: str, formatter) -&gt; str: tokens = tokenize(code, language) config = FormatConfig(data_language=language) return formatter.format_string(tokens, config) # Usage output = highlight_custom(&quot;def foo(): pass&quot;, &quot;python&quot;, TerminalFormatter()) Token Type Reference See Token Types for the complete list of token types to handle in your formatter. Next Steps API Reference — tokenize() function details Token Types — All available token types","excerpt":"Custom Formatter Build custom formatters for terminal output, LaTeX, or any other format. The Formatter Protocol Formatters implement a simple protocol: from typing import Protocol, Iterable from...","metadata":{"title":"Custom Formatter","description":"Build custom output formats beyond HTML","draft":false,"weight":10,"lang":"en","type":"doc","tags":["formatter","customization"],"keywords":["custom formatter","terminal","latex"],"icon":"code","variant":"standard"},"section":"extending","tags":["formatter","customization"],"word_count":382,"reading_time":2,"graph":{"nodes":[{"id":"8959327404264249969","label":"Extending","url":"/docs/extending/","type":"regular","tags":["extending","customization"],"incoming_refs":3,"outgoing_refs":1,"connectivity":4,"reading_time":1,"size":14.8,"color":"var(--graph-node-regular)","isCurrent":true},{"id":"7983002193751202743","label":"Custom Formatter","url":"/docs/extending/custom-formatter/","type":"regular","tags":["formatter","customization"],"incoming_refs":3,"outgoing_refs":1,"connectivity":4,"reading_time":2,"size":15.6,"color":"var(--graph-node-regular)","isCurrent":true}],"edges":[{"source":"8959327404264249969","target":"7983002193751202743","weight":2}]}}